---
import { renderMermaid, THEMES } from 'beautiful-mermaid'

interface Props {
  chart: string
  theme?: keyof typeof THEMES
}

const { chart, theme = 'dracula' } = Astro.props
const options = { ...THEMES[theme], transparent: true };

const svg = await renderMermaid(chart, options)
---

<figure className="mermaid-diagram">
  <div set:html={svg} />
</figure>

<style>
  .mermaid-diagram {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin: 1.5rem 0;
  }

  .mermaid-diagram :global(svg) {
    width: 100%;
    max-width: 100%;
    height: auto;
  }
</style>
